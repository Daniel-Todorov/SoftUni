<div header-directive></div>
<section>
    <div navigation-directive></div>
</section>
<section>
    <div ng-show="hasError || hasSuccess">
        <div ng-show="hasError">
            <p>{{errorMessage}}</p>
        </div>
        <div ng-show="hasSuccess">
            <p>{{successMessage}}</p>
        </div>
        <button ng-click="dismissError()">X</button>
    </div>
    <div>
        <h2>Edit Ad</h2>

        <form name="editAdForm">
            <div>
                <div>
                    <label for="title">Title:</label>
                    <input id="title" type="text" ng-required="true" ng-model="publishInfo.title">
                    <label for="text">Text:</label>
                    <input id="text" type="text" ng-required="true" ng-model="publishInfo.text">
                </div>
                <div>
                    <img ng-show="publishInfo.imageDataUrl" ng-src="{{publishInfo.imageDataUrl}}">
                </div>
            </div>
            <label for="imageDataUrl">Image:</label>
            <span>{{imageUrl}}</span>
            <label for="imageDataUrl">Browse ...</label>
            <label for="imageDataUrl" ng-click="changeImage()">Change image</label>
            <button ng-click="deleteImage()">Delete image</button>
            <input file-input id="imageDataUrl" type="file" ng-hide="true" ng-model="publishInfo.imageDataUrl"
                   onchange="angular.element(this).scope().getImageUrl(this)">
            <label for="categoryId">Category:</label>
            <select id="categoryId" ng-model="publishInfo.categoryId"
                    ng-options="category.id as category.name for category in categories">
                <option value="">-- Category --</option>
            </select>
            <label for="townId">Town:</label>
            <select id="townId" ng-model="publishInfo.townId" ng-options="town.id as town.name for town in towns">
                <option value="">-- Town --</option>
            </select>
            <button ng-click="editAd(publishInfo)" ng-disabled="editAdForm.$invalid">
                Edit
            </button>
            <button ng-click="cancel()">Cancel</button>

        </form>
    </div>
</section>